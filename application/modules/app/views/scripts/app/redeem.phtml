
<div class="row">
	<div class="span12">
		<div class="title">
			<div class="title-icon">
				<a href=""><img class="face" width="50" height="50"
					src="https://graph.facebook.com/<?= $this->facebook_user->facebook_user_id ?>/picture"
					onerror="ImgError(this);"> </a>
			</div>
			<div class="title-header">
		
				Redemption
				
			</div>
		</div>
		<div class="row box">
			<div class="post-container">
				<span>Badge List:</span>
				<div class="badge-section"></div>
				<ul>
					<?php foreach ($this->badgesList as $badge) {?>
						<li class="badge_<?=$badge['id']?>"><span><?=$badge['name']?></span><img class="badge" width="50" height="50" src="<?=$badge['picture']?>"/>
						<a href="#" onclick="redeem(<?=$badge['id']?>); return false;">Redeem</a></li>
					<? }?>
				</ul>
			</div>
		</div>
	</div>
</div>

<script>
function redeem(badgeId) {

	$.ajax({
		type : "GET",
		url : serverUrl + '/app/redeem/confirm?badgeId='+badgeId,
		cache : false,
		async : true,
		success : function(data) {
			if($.trim(data) == 'ok') {
				alert('you redeem a badge');
				$(".badge_"+badgeId).remove();
			}
			//getLatestPost();
		},
		error : function(xhr, errorMessage, thrownErro) {
			console.log(xhr.statusText, errorMessage);
		}
	});
}
</script>
